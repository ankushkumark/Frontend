{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///E:/New/Frontend/my-app/src/components/AuthForm.js"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { FcGoogle } from \"react-icons/fc\";\r\n\r\nexport default function AuthForm({ type }) {\r\n  const [form, setForm] = useState({ name: \"\", email: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    if (!form.email || !form.password || (type === \"signup\" && !form.name)) {\r\n      setError(\"All fields are required\");\r\n      return;\r\n    }\r\n\r\n    if (type === \"signup\") {\r\n      if (form.password.length < 5) {\r\n        setError(\"Password must be at least 5 characters long\");\r\n        return;\r\n      }\r\n      if (!/^[A-Z]/.test(form.password)) {\r\n        setError(\"Password must start with a capital letter\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await fetch(`http://localhost:5000/api/auth/${type}`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(form),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || \"Something went wrong\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (type === \"login\") {\r\n        // Save token\r\n        localStorage.setItem(\"token\", data.token);\r\n\r\n        const user = data.user || data;\r\n\r\n        localStorage.setItem(\"userId\", user?._id || user?.id || \"\");\r\n        localStorage.setItem(\"name\", user?.name || \"\");\r\n        localStorage.setItem(\"email\", user?.email || \"\");\r\n\r\n        if (user?.profilePic) {\r\n          localStorage.setItem(\"avatar\", user.profilePic);\r\n        } else {\r\n          localStorage.removeItem(\"avatar\");\r\n        }\r\n\r\n        localStorage.setItem(\r\n          \"user\",\r\n          JSON.stringify({\r\n            _id: user?._id || user?.id,\r\n            email: user?.email || \"\",\r\n            name: user?.name || \"\",\r\n            avatar: user?.profilePic || \"\",\r\n          })\r\n        );\r\n\r\n        router.push(\"/\"); // dashboard (app/page.js)\r\n      } else {\r\n        router.push(\"/login\");\r\n      }\r\n\r\n      setForm({ ...form, password: \"\" });\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(\"Server error:\", err);\r\n      setError(\"Server error, try again later.\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Google login callback handler\r\n  const handleGoogleLogin = () => {\r\n    window.open(\"http://localhost:5000/api/auth/google\", \"_self\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\r\n      <div className=\"w-full max-w-md bg-white shadow-lg rounded-lg p-8\">\r\n        <h1 className=\"text-2xl font-bold text-center text-green-600 mb-6\">\r\n          FINEbank.IO\r\n        </h1>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {type === \"signup\" && (\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              className=\"w-full border rounded-lg px-3 py-2 focus:outline-green-600\"\r\n              value={form.name}\r\n              onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n            />\r\n          )}\r\n\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email Address\"\r\n            className=\"w-full border rounded-lg px-3 py-2 focus:outline-green-600\"\r\n            value={form.email}\r\n            onChange={(e) => setForm({ ...form, email: e.target.value })}\r\n          />\r\n\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            className=\"w-full border rounded-lg px-3 py-2 focus:outline-green-600\"\r\n            value={form.password}\r\n            onChange={(e) => setForm({ ...form, password: e.target.value })}\r\n          />\r\n\r\n          {type === \"login\" && (\r\n            <div className=\"flex items-center justify-between\">\r\n              <label className=\"flex items-center space-x-2\">\r\n                <input type=\"checkbox\" className=\"w-4 h-4\" />\r\n                <span className=\"text-sm\">Keep me signed in</span>\r\n              </label>\r\n              <a href=\"/forgot-password\" className=\"text-sm text-green-600\">\r\n                Forgot Password?\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {loading\r\n              ? \"Please wait...\"\r\n              : type === \"login\"\r\n              ? \"Login\"\r\n              : \"Sign up\"}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-grow border-gray-300\" />\r\n          <span className=\"px-2 text-gray-500 text-sm\">or sign in with</span>\r\n          <hr className=\"flex-grow border-gray-300\" />\r\n        </div>\r\n\r\n        {/*  Google login  */}\r\n        <button\r\n          onClick={handleGoogleLogin}\r\n          className=\"w-full flex items-center justify-center border rounded-lg py-2 hover:bg-gray-50\"\r\n        >\r\n          <FcGoogle className=\"w-5 h-5 mr-2\" />\r\n          Continue with Google\r\n        </button>\r\n\r\n        <p className=\"text-sm text-center mt-4\">\r\n          {type === \"login\" ? (\r\n            <>\r\n              Donâ€™t have an account?{\" \"}\r\n              <a href=\"/signup\" className=\"text-green-600\">\r\n                Create an account\r\n              </a>\r\n            </>\r\n          ) : (\r\n            <>\r\n              Already have an account?{\" \"}\r\n              <a href=\"/login\" className=\"text-green-600\">\r\n                Sign in here\r\n              </a>\r\n            </>\r\n          )}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,SAAS,EAAE,IAAI,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;QAAE,MAAM;QAAI,OAAO;QAAI,UAAU;IAAG;IACrE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,QAAQ,IAAK,SAAS,YAAY,CAAC,KAAK,IAAI,EAAG;YACtE,SAAS;YACT;QACF;QAEA,IAAI,SAAS,UAAU;YACrB,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,GAAG;gBAC5B,SAAS;gBACT;YACF;YACA,IAAI,CAAC,SAAS,IAAI,CAAC,KAAK,QAAQ,GAAG;gBACjC,SAAS;gBACT;YACF;QACF;QAEA,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,MAAM,CAAC,+BAA+B,EAAE,MAAM,EAAE;gBAChE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,SAAS,KAAK,OAAO,IAAI;gBACzB,WAAW;gBACX;YACF;YAEA,IAAI,SAAS,SAAS;gBACpB,aAAa;gBACb,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;gBAExC,MAAM,OAAO,KAAK,IAAI,IAAI;gBAE1B,aAAa,OAAO,CAAC,UAAU,MAAM,OAAO,MAAM,MAAM;gBACxD,aAAa,OAAO,CAAC,QAAQ,MAAM,QAAQ;gBAC3C,aAAa,OAAO,CAAC,SAAS,MAAM,SAAS;gBAE7C,IAAI,MAAM,YAAY;oBACpB,aAAa,OAAO,CAAC,UAAU,KAAK,UAAU;gBAChD,OAAO;oBACL,aAAa,UAAU,CAAC;gBAC1B;gBAEA,aAAa,OAAO,CAClB,QACA,KAAK,SAAS,CAAC;oBACb,KAAK,MAAM,OAAO,MAAM;oBACxB,OAAO,MAAM,SAAS;oBACtB,MAAM,MAAM,QAAQ;oBACpB,QAAQ,MAAM,cAAc;gBAC9B;gBAGF,OAAO,IAAI,CAAC,MAAM,0BAA0B;YAC9C,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;YAEA,QAAQ;gBAAE,GAAG,IAAI;gBAAE,UAAU;YAAG;YAChC,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,SAAS;YACT,WAAW;QACb;IACF;IAEA,gCAAgC;IAChC,MAAM,oBAAoB;QACxB,OAAO,IAAI,CAAC,yCAAyC;IACvD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAqD;;;;;;8BAInE,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;wBACrC,SAAS,0BACR,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;4BACV,OAAO,KAAK,IAAI;4BAChB,UAAU,CAAC,IAAM,QAAQ;oCAAE,GAAG,IAAI;oCAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gCAAC;;;;;;sCAI7D,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;4BACV,OAAO,KAAK,KAAK;4BACjB,UAAU,CAAC,IAAM,QAAQ;oCAAE,GAAG,IAAI;oCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gCAAC;;;;;;sCAG5D,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;4BACV,OAAO,KAAK,QAAQ;4BACpB,UAAU,CAAC,IAAM,QAAQ;oCAAE,GAAG,IAAI;oCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gCAAC;;;;;;wBAG9D,SAAS,yBACR,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;;sDACf,8OAAC;4CAAM,MAAK;4CAAW,WAAU;;;;;;sDACjC,8OAAC;4CAAK,WAAU;sDAAU;;;;;;;;;;;;8CAE5B,8OAAC;oCAAE,MAAK;oCAAmB,WAAU;8CAAyB;;;;;;;;;;;;wBAMjE,uBAAS,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;sCAE/C,8OAAC;4BACC,MAAK;4BACL,UAAU;4BACV,WAAU;sCAET,UACG,mBACA,SAAS,UACT,UACA;;;;;;;;;;;;8BAIR,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;;;;;;sCACd,8OAAC;4BAAK,WAAU;sCAA6B;;;;;;sCAC7C,8OAAC;4BAAG,WAAU;;;;;;;;;;;;8BAIhB,8OAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,8OAAC,0JAAQ;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;8BAIvC,8OAAC;oBAAE,WAAU;8BACV,SAAS,wBACR;;4BAAE;4BACuB;0CACvB,8OAAC;gCAAE,MAAK;gCAAU,WAAU;0CAAiB;;;;;;;qDAK/C;;4BAAE;4BACyB;0CACzB,8OAAC;gCAAE,MAAK;gCAAS,WAAU;0CAAiB;;;;;;;;;;;;;;;;;;;;;;;;AAS1D","debugId":null}}]
}