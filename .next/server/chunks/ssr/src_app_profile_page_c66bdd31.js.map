{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/New/Frontend/my-app/src/app/profile/page.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function ProfilePage() {\r\n  const [profile, setProfile] = useState({\r\n    fullName: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    photo: null,\r\n  });\r\n\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  // ✅ Login ke baad userId localStorage me save karna hoga\r\n  useEffect(() => {\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (storedUser?._id) {\r\n      setUserId(storedUser._id);\r\n      fetchUser(storedUser._id);\r\n    }\r\n  }, []);\r\n\r\n  // ✅ API se user ka data fetch\r\n  const fetchUser = async (id) => {\r\n    try {\r\n      const res = await axios.get(`http://localhost:5000/api/users/${id}`);\r\n      setProfile({\r\n        fullName: res.data.name,\r\n        email: res.data.email,\r\n        phone: res.data.phone || \"\",\r\n        photo: res.data.profile || null,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // ✅ Input change handler\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setProfile((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // ✅ File change handler\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setProfile((prev) => ({ ...prev, photo: file }));\r\n    }\r\n  };\r\n\r\n  // ✅ Profile update handler\r\n  const handleUpdate = async () => {\r\n    if (!userId) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"name\", profile.fullName);\r\n    formData.append(\"email\", profile.email);\r\n    formData.append(\"phone\", profile.phone);\r\n    if (profile.photo instanceof File) {\r\n      formData.append(\"profile\", profile.photo);\r\n    }\r\n\r\n    try {\r\n      const res = await axios.put(\r\n        `http://localhost:5000/api/users/${userId}`,\r\n        formData,\r\n        { headers: { \"Content-Type\": \"multipart/form-data\" } }\r\n      );\r\n\r\n      // ✅ LocalStorage me update kar do taki sidebar bhi update ho\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n      alert(\"Profile updated successfully!\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to update profile\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 md:p-10\">\r\n      <div className=\"bg-white shadow-md rounded-lg p-6 w-full max-w-4xl mx-auto\">\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-gray-200 mb-6\">\r\n          <button className=\"px-4 py-2 text-sm font-medium text-teal-600 border-b-2 border-teal-600\">\r\n            Account\r\n          </button>\r\n          <button className=\"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700\">\r\n            Security\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n          {/* Left side form */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm text-gray-500\">Full name</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"fullName\"\r\n                value={profile.fullName}\r\n                onChange={handleInputChange}\r\n                className=\"mt-1 w-full px-3 py-2 border rounded-md text-gray-700\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm text-gray-500\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={profile.email}\r\n                onChange={handleInputChange}\r\n                className=\"mt-1 w-full px-3 py-2 border rounded-md text-gray-700\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm text-gray-500\">Phone Number</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"phone\"\r\n                value={profile.phone}\r\n                onChange={handleInputChange}\r\n                className=\"mt-1 w-full px-3 py-2 border rounded-md text-gray-700\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right side - Profile Picture */}\r\n          <div className=\"flex flex-col items-center justify-center\">\r\n            <label className=\"block text-sm text-gray-500 mb-2\">\r\n              Your Profile Picture\r\n            </label>\r\n            <div className=\"w-32 h-32 border-2 border-dashed border-gray-300 flex items-center justify-center rounded-md relative\">\r\n              {profile.photo && !(profile.photo instanceof File) ? (\r\n                <img\r\n                  src={`http://localhost:5000/${profile.photo}`}\r\n                  alt=\"Profile\"\r\n                  className=\"w-full h-full object-cover rounded-md\"\r\n                />\r\n              ) : profile.photo instanceof File ? (\r\n                <img\r\n                  src={URL.createObjectURL(profile.photo)}\r\n                  alt=\"Preview\"\r\n                  className=\"w-full h-full object-cover rounded-md\"\r\n                />\r\n              ) : (\r\n                <span className=\"text-sm text-gray-400\">Upload your photo</span>\r\n              )}\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileChange}\r\n                className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Update button */}\r\n        <div className=\"mt-6\">\r\n          <button\r\n            onClick={handleUpdate}\r\n            className=\"px-6 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700\"\r\n          >\r\n            Update Profile\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}