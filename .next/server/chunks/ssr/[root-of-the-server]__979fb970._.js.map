{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///E:/New/Frontend/my-app/src/app/security/page.js"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function SecurityPage() {\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [retypePassword, setRetypePassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleUpdatePassword = async () => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n    console.log(\"UserId from localStorage:\", userId);\r\n\r\n    if (!userId) {\r\n      setMessage(\"‚ùå User not found, please login again.\");\r\n      return;\r\n    }\r\n\r\n    // üîπ Validations\r\n    if (!oldPassword) {\r\n      setMessage(\"‚ùå Please enter your old password\");\r\n      return;\r\n    }\r\n    if (newPassword.length < 5) {\r\n      setMessage(\"‚ùå New password must be at least 5 characters long\");\r\n      return;\r\n    }\r\n    if (!/^[A-Z]/.test(newPassword)) {\r\n      setMessage(\"‚ùå New password must start with a capital letter\");\r\n      return;\r\n    }\r\n    if (newPassword !== retypePassword) {\r\n      setMessage(\"‚ùå New Password and Retype Password do not match\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `http://localhost:5000/api/password/update/${userId}`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ oldPassword, newPassword }),\r\n        }\r\n      );\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setMessage(\"‚úÖ Password updated successfully\");\r\n        setOldPassword(\"\");\r\n        setNewPassword(\"\");\r\n        setRetypePassword(\"\");\r\n      } else {\r\n        setMessage(\"‚ùå \" + data.message);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"‚ùå Something went wrong\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 md:p-10\">\r\n      <div className=\"bg-white shadow-md rounded-lg p-6 w-full max-w-4xl mx-auto\">\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-gray-200 mb-6\">\r\n          <Link\r\n            href=\"/profile\"\r\n            className=\"px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700\"\r\n          >\r\n            Account\r\n          </Link>\r\n          <Link\r\n            href=\"/profile/security\"\r\n            className=\"px-4 py-2 text-sm font-medium text-teal-600 border-b-2 border-teal-600\"\r\n          >\r\n            Security\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Security form */}\r\n        <div className=\"space-y-4 max-w-md\">\r\n          <div>\r\n            <label className=\"block text-sm text-gray-500\">Old Password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={oldPassword}\r\n              onChange={(e) => setOldPassword(e.target.value)}\r\n              className=\"mt-1 w-full px-3 py-2 border rounded-md text-gray-700\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm text-gray-500\">New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              className=\"mt-1 w-full px-3 py-2 border rounded-md text-gray-700\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm text-gray-500\">Retype Password</label>\r\n            <input\r\n              type=\"password\"\r\n              value={retypePassword}\r\n              onChange={(e) => setRetypePassword(e.target.value)}\r\n              className=\"mt-1 w-full px-3 py-2 border rounded-md text-gray-700\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleUpdatePassword}\r\n            className=\"px-6 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700\"\r\n          >\r\n            Update Password\r\n          </button>\r\n\r\n          {/* Status message */}\r\n          {message && (\r\n            <p\r\n              className={`text-sm mt-2 ${\r\n                message.startsWith(\"‚úÖ\") ? \"text-green-600\" : \"text-red-500\"\r\n              }`}\r\n            >\r\n              {message}\r\n            </p>\r\n          )}\r\n\r\n          {/* üîô Back button */}\r\n          <div className=\"mt-6\">\r\n            <Link\r\n              href=\"/profile\"\r\n              className=\"inline-block px-6 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\r\n            >\r\n              ‚¨Ö Back\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,uBAAuB;QAC3B,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,QAAQ,GAAG,CAAC,6BAA6B;QAEzC,IAAI,CAAC,QAAQ;YACX,WAAW;YACX;QACF;QAEA,iBAAiB;QACjB,IAAI,CAAC,aAAa;YAChB,WAAW;YACX;QACF;QACA,IAAI,YAAY,MAAM,GAAG,GAAG;YAC1B,WAAW;YACX;QACF;QACA,IAAI,CAAC,SAAS,IAAI,CAAC,cAAc;YAC/B,WAAW;YACX;QACF;QACA,IAAI,gBAAgB,gBAAgB;YAClC,WAAW;YACX;QACF;QAEA,IAAI;YACF,MAAM,MAAM,MAAM,MAChB,CAAC,0CAA0C,EAAE,QAAQ,EACrD;gBACE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAa;gBAAY;YAClD;YAGF,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,IAAI,EAAE,EAAE;gBACV,WAAW;gBACX,eAAe;gBACf,eAAe;gBACf,kBAAkB;YACpB,OAAO;gBACL,WAAW,OAAO,KAAK,OAAO;YAChC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;8BAMH,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA8B;;;;;;8CAC/C,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,WAAU;;;;;;;;;;;;sCAGd,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA8B;;;;;;8CAC/C,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,WAAU;;;;;;;;;;;;sCAGd,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA8B;;;;;;8CAC/C,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;oCACjD,WAAU;;;;;;;;;;;;sCAId,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;wBAKA,yBACC,8OAAC;4BACC,WAAW,CAAC,aAAa,EACvB,QAAQ,UAAU,CAAC,OAAO,mBAAmB,gBAC7C;sCAED;;;;;;sCAKL,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}}]
}